(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{368:function(s,a,t){"use strict";t.r(a);var e=t(44),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息"}},[s._v("#")]),s._v(" 消息")]),s._v(" "),t("p",[s._v("因为此处的具体消息是基本完全按照"),t("a",{attrs:{href:"https://project-mirai.github.io/mirai-api-http/MessageType.html#source",target:"_blank",rel:"noopener noreferrer"}},[s._v("mirai-api-http文档"),t("OutboundLink")],1),s._v("来实现的，所以此部分文档不再赘述每个具体的消息和它的每个属性代表什么意思。")]),s._v(" "),t("h2",{attrs:{id:"messagereceivedargs"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#messagereceivedargs"}},[s._v("#")]),s._v(" MessageReceivedArgs")]),s._v(" "),t("p",[s._v("这个消息接收事件参数之所以没有放到事件参数那页去讲，是因为这个事件参数是Mirai.Net收发消息的核心部分。但是这个类十分简单，只有3个公开属性：")]),s._v(" "),t("ul",[t("li",[s._v("Type：就是接收到的消息的类型，是一个"),t("a",{attrs:{href:"wd"}},[s._v("MeesageTyoe枚举")])]),s._v(" "),t("li",[s._v("MessageChain：就是接收到的消息内容。本质上是一个MessageBase数组，MessageBase就是所有"),t("a",{attrs:{href:"https://project-mirai.github.io/mirai-api-http/MessageType.html#source",target:"_blank",rel:"noopener noreferrer"}},[s._v("具体消息对象"),t("OutboundLink")],1),s._v("的基类")]),s._v(" "),t("li",[s._v("Sender：就是接收到的消息是从哪里来的，类型是一个MessageSender对象\n"),t("ul",[t("li",[s._v("Id: 消息发送者的QQ号")]),s._v(" "),t("li",[s._v("Name：消息发送者的群名片")]),s._v(" "),t("li",[s._v("PermissionType：消息发送者在群内的权限")]),s._v(" "),t("li",[s._v("Group：收到此消息的群\n"),t("ul",[t("li",[s._v("Id：群号")]),s._v(" "),t("li",[s._v("Name：群名称")]),s._v(" "),t("li",[s._v("PermissionType：机器人在群内的权限")])])])])])]),s._v(" "),t("h2",{attrs:{id:"消息链-meesagechain"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息链-meesagechain"}},[s._v("#")]),s._v(" 消息链 (MeesageChain)")]),s._v(" "),t("p",[s._v("前面提到过，消息链就是接收到的消息内容，本质上是一个MessageBase，这就是mirai解析一条接收到的消息的方案。")]),s._v(" "),t("p",[s._v("举个例子：")]),s._v(" "),t("blockquote",[t("p",[s._v("aaaa[图片]")])]),s._v(" "),t("p",[s._v("转换成消息链就是：")]),s._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Source"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"id"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"time"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456789")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Plain"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"text"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aaaa"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"type"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Image"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"imageId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx-xxx-xxx-xxx"')]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])])]),t("h2",{attrs:{id:"消息回调-messagecallback"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消息回调-messagecallback"}},[s._v("#")]),s._v(" 消息回调 (MessageCallback)")]),s._v(" "),t("p",[s._v("消息回调就是发送消息后传回来的参数。")]),s._v(" "),t("ul",[t("li",[s._v("Code：状态码，如果是0就是成功")]),s._v(" "),t("li",[s._v("Message：回调消息，如果成功就是success，失败就是失败的原因")]),s._v(" "),t("li",[t("strong",[s._v("MessageId")]),s._v("：消息唯一ID，可以用来撤回消息，回复消息之类的")])])])}),[],!1,null,null,null);a.default=r.exports}}]);